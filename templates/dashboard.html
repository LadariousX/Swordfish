<!DOCTYPE html>
<html>
<head>
  <title>Ticket Dashboard</title>
  <style>
    table { border-collapse: collapse; width: 100%; margin-top: 20px; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
    th { background: #eee; }
    .status-select { width: 100%; }
  </style>
</head>
<body>
  <h2>ðŸŽ« Ticket Dashboard</h2>
  <p>Logged in as: {{ request.user.username }}</p>
  <a href="{% url 'logout' %}">Logout</a>

  <table>
    <tr>
      <th>ID</th>
      <th>Location</th>
      <th>Department</th>
      <th>Priority</th>
      <th>Status</th>
      <th>Actions</th>
    </tr>

    {% for ticket in tickets %}
    <tr>
      <td>{{ ticket.id }}</td>
      <td>{{ ticket.location }}</td>
      <td>{{ ticket.department }}</td>
      <td>{{ ticket.priority }}</td>
      <td>{{ ticket.status }}</td>
      <td>
        <form method="POST" style="display:inline;">
          {% csrf_token %}
          <input type="hidden" name="ticket_id" value="{{ ticket.id }}">
          <select name="status" class="status-select">
            <option {% if ticket.status == "New" %}selected{% endif %}>New</option>
            <option {% if ticket.status == "In Progress" %}selected{% endif %}>In Progress</option>
            <option {% if ticket.status == "Resolved" %}selected{% endif %}>Resolved</option>
          </select>
          <button type="submit">Update</button>
        </form>
      </td>
    </tr>
    {% empty %}
    <tr><td colspan="6">No tickets found.</td></tr>
    {% endfor %}
  </table>
</body>
</html>
